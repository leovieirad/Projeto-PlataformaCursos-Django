{% extends 'base.html' %}
{% block title %}Perfil do Usuário{% endblock %}

{% block content %}
<h2>Perfil de {{ usuario.get_full_name|default:usuario.username }}</h2>
<p><strong>Email:</strong> {{ usuario.email }}</p>

<h3 class="mt-4">Cursos Matriculados</h3>

{% for m in matriculas %}
  <div class="mb-3 p-3 bg-light rounded">
    <h5>{{ m.curso.titulo }}</h5>

    {% with progresso.m.curso.id as prog %}
      <div class="progress" style="height: 20px;">
        <div class="progress-bar bg-success" role="progressbar"
             style="width: {{ prog.percentual }}%;" 
             aria-valuenow="{{ prog.percentual }}" 
             aria-valuemin="0" aria-valuemax="100">
          {{ prog.percentual }}%
        </div>
      </div>
      <small>{{ prog.assistidas }} de {{ prog.total }} aulas assistidas</small>
    {% endwith %}
  </div>
{% empty %}
  <p>Você ainda não está matriculado em nenhum curso.</p>
{% endfor %}

{% endblock %}
