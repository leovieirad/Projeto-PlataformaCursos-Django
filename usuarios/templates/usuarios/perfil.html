{% extends 'base.html' %}
{% block title %}Perfil do Usuário{% endblock %}

{% block content %}
  <h2 class="mb-1">{{ usuario.first_name }} {{ usuario.last_name }}</h2>
  <p class="mb-0"><strong>Email:</strong> {{ usuario.email }}</p>

  <h3 class="mt-4">Cursos Matriculados</h3>

  {% for m in matriculas %}
    {% with progresso.m.curso.id as prog %}
      <div class="mb-3 p-3 bg-light rounded">
        <h5>{{ m.curso.titulo }}</h5>
        <div class="progress mb-1" style="height: 20px;">
          <div class="progress-bar bg-success" role="progressbar"
               style="width: {{ prog.percentual }}%;" 
               aria-valuenow="{{ prog.percentual }}" 
               aria-valuemin="0" aria-valuemax="100">
            {{ prog.percentual }}%
          </div>
        </div>
        <small>{{ prog.assistidas }} de {{ prog.total }} aulas assistidas</small>
      </div>
    {% endwith %}
  {% empty %}
    <p>Você ainda não está matriculado em nenhum curso.</p>
  {% endfor %}
{% endblock %}
