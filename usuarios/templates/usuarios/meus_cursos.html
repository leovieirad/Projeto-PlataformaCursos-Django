{% extends 'base.html' %}

{% block title %}Meus Cursos{% endblock %}

{% block content %}
<h2>Meus Cursos</h2>

{% if matriculas %}
  {% for m in matriculas %}
    <div class="card mb-3 d-flex flex-row align-items-center p-2">
      {% if m.curso.imagem %}
        <img src="{{ m.curso.imagem.url }}" alt="Imagem do curso"
             style="width: 100px; height: 100px; object-fit: cover;" class="me-3 rounded">
      {% endif %}

      <div class="flex-grow-1">
        <h5>{{ m.curso.titulo }}</h5>
        <p class="mb-1 text-muted">{{ m.curso.descricao|truncatewords:20 }}</p>
        <a href="{% url 'detalhe_curso' m.curso.slug %}" class="btn btn-sm btn-outline-primary">Ir para o curso</a>
      </div>

      <form method="post" action="{% url 'desmatricular_curso' m.curso.slug %}" class="ms-3">
        {% csrf_token %}
        <button type="submit" class="btn btn-sm btn-outline-danger">Desmatricular</button>
      </form>
    </div>
  {% endfor %}
{% else %}
  <div class="alert alert-warning">
    Você ainda não está matriculado em nenhum curso.
  </div>
{% endif %}
<a href="{% url 'lista_cursos' %}" class="btn btn-link mt-3">← Ver todos os cursos</a>
{% endblock %}
